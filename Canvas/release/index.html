<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<canvas id="myCanvas" width="1200" height="1200" style="border:1px solid #d3d3d3;">
    Your browser does not support the HTML5 canvas tag.
</canvas>
</body>
<script src="../js/md5.js"></script>
<script src="Canvas.js"></script>
<script>

    var c = document.getElementById("myCanvas");
    canvas = new Canvas(c);

    var lines = [];
    var i = 5000;
    while (i--) {
        lines.push(canvas.addLine({
            x: System.rand(0, 1200),
            y: System.rand(0, 1200)
        }, {
            x: System.rand(0, 1200),
            y: System.rand(0, 1200)
        }));
    }

    canvas.autoUpdate(20);

    function move() {
        for (var i in lines) {
            var callback = null;
            if (i >= lines.length - 1) {
                callback = function () {
                    move();
                }
            }
            canvas.getLine(lines[i]).move(
                    {x: System.rand(0, 1200), y: System.rand(0, 1200)},
                    {x: System.rand(0, 1200), y: System.rand(0, 1200)},
                    1000, callback
            );

        }
    }
    move();


</script>
</html>